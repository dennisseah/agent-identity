---
title: Federated Identity Credential
content:
  - type: paragraph
    text: >
      A *federated identity credential* in *Azure Entra ID* enables an
      application or service to authenticate using external identities---such as
      those issued by GitHub Actions or Azure Managed Identities---without
      traditional secrets or certificates. This credential type leverages the
      OpenID Connect (OIDC) protocol to establish a trust relationship between
      *Azure Entra ID* and the external identity provider, enabling secure,
      passwordless authentication. Adopting federated identity credentials
      reduces the attack surface associated with credential management,
      strengthens overall security posture, and streamlines integration with
      modern development and deployment workflows.
  - type: paragraph
    text: >
      Each federated identity credential is associated with an *agent blueprint*
      (\S\ref{sec:agent_blueprint}) and serves as the authentication mechanism
      for agent instances that access resources across the Azure ecosystem.
      Because Azure manages the credential lifecycle---including automatic
      rotation---the risk of credential leakage is significantly reduced. This
      approach simplifies the authentication process for agents, enabling them
      to obtain access tokens for Azure resources without handling secrets
      directly.
  - type: paragraph
    subsection:
      "Sample PowerShell Script for Creating a Federated Identity Credential"
    text: >
      [`scripts/CreateFederatedIdentityCredential.ps1`](https://github.com/dennisseah/agent-identity/blob/main/scripts/CreateFederatedIdentityCredential.ps1)
      is a reference script that creates or updates a federated identity
      credential on an *agent blueprint* in *Azure Entra ID*. The script accepts
      the following parameters: `$blueprint_app_id` (the app ID of the parent
      blueprint), `$subject` (the subject claim, such as a managed identity
      principal ID or a GitHub Actions reference), `$issuer` (the issuer URL of
      the external identity provider), `$audiences` (the token audience;
      defaults to `api://AzureADTokenExchange`), `$description` (an optional
      description), and `$fed_cred_name` (the credential name). The script
      authenticates to Microsoft Graph with the required permissions, verifies
      that the specified blueprint exists, checks for an existing credential
      with the same name, prompts for confirmation if the subject differs, and
      issues a POST or PATCH request to the Microsoft Graph beta endpoint
      accordingly. This implementation can be adapted or automated to suit
      organizational provisioning workflows.
  - type: paragraph
    subsection:
      "Sample PowerShell Script for Listing Federated Identity Credentials"
    text: >
      [`scripts/ListFederatedIdentityCredentials.ps1`](https://github.com/dennisseah/agent-identity/blob/main/scripts/ListFederatedIdentityCredentials.ps1)
      is a reference script that lists the federated identity credentials
      associated with a specific *agent blueprint* in *Azure Entra ID*. The
      script accepts the parameter `$blueprint_app_id` (the app ID of the parent
      blueprint). It authenticates to Microsoft Graph with the required
      permissions, retrieves all federated identity credentials for the
      specified blueprint, and outputs each credential's name, subject claim,
      issuer, audiences, and description. This capability supports auditing and
      governance by providing visibility into the credentials used for agent
      authentication.
  - type: paragraph
    subsection:
      "Sample PowerShell Script for Deleting a Federated Identity Credential"
    text: >
      [`scripts/DeleteFederatedIdentityCredential.ps1`](https://github.com/dennisseah/agent-identity/blob/main/scripts/DeleteFederatedIdentityCredential.ps1)
      is a reference script that deletes a federated identity credential from an
      *agent blueprint* in *Azure Entra ID*. The script accepts the parameters
      `$blueprint_app_id` (the app ID of the parent blueprint) and `$subject`
      (the subject claim of the credential to remove). It authenticates to
      Microsoft Graph with the required permissions, retrieves the federated
      identity credentials for the specified blueprint, identifies the
      credential matching the provided subject claim, and issues a DELETE
      request to the Microsoft Graph beta endpoint. Timely removal of unused or
      compromised credentials is essential for maintaining a sound security
      posture. This implementation can be adapted or automated to suit
      organizational deprovisioning workflows.
